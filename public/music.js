"use strict";

////////////////////////////////////////////////////////////////////////////////////////////////////
// base ////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
var app = {};
var ui = {};
var $ui = {};
var cue = {}; // TODO: mover para lugar apropriado

$(function () {
  $ui["library"] = $(".library");
});

var duration = function duration(seconds) {
  return moment.utc(moment.duration(seconds, "seconds").asMilliseconds()).format("m:ss");
}; ////////////////////////////////////////////////////////////////////////////////////////////////////
// core / template engine //////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////


ui.template = function () {
  var $templates = {};
  $(function () {
    $("template").each(function () {
      var $this = $(this);
      var name = $this.attr("id");
      var html = $this.html();
      $templates[name] = $(html);
      $this.remove();
    });
  });

  var render = function render(template, data) {
    if (!$templates[template]) {
      return false;
    }

    var $render = $templates[template].clone();
    $render.data(data);

    $.fn.fillBlanks = function () {
      var $blank = $(this);
      var fill = $blank.data("fill");
      var rules = fill.split(",");

      for (var i = 0; i < rules.length; i++) {
        var pair = rules[i].split(":");
        var dest = pair[1] ? pair[0].trim() : "html";
        var source = pair[1] ? pair[1].trim() : pair[0];
        var value = data[source];
        source = source.split("/");

        if (source.length > 1 && typeof value !== "undefined") {
          value = data[source[0]];

          for (var j = 1; j < source.length; j++) {
            value = value[source[j]] ? value[source[j]] : null;
          }
        }

        if (typeof value !== "undefined" && value !== null) {
          if (dest === "class") {
            $blank.addClass(value);
          } else if (dest === "html") {
            $blank.html(value);
          } else if (dest === "value") {
            $blank.val(value);
          } else {
            $blank.attr(dest, value);
          }
        } else {
          var if_null = $blank.data("fill-null");

          if (if_null === "hide") {
            $blank.hide();
          } else if (if_null === "remove") {
            $blank.remove();
          }
        }
      }

      $blank.removeClass("fill").removeAttr("data-fill").removeAttr("data-fill-null");
    };

    if ($render.hasClass("fill")) {
      $render.fillBlanks();
    }

    $(".fill", $render).each(function () {
      $(this).fillBlanks();
    });
    return $render;
  };

  return {
    render: render
  };
}();

var __render = ui.template.render; ////////////////////////////////////////////////////////////////////////////////////////////////////
// player //////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////

var queue = [{
  "title": "Captain Calvin (Original Mix)",
  "artist": "Louk",
  "album": "Chillhop Essentials Winter 2018",
  "length": 140,
  "file": "/data/files/14 Captain Calvin (Original Mix).mp3"
}, {
  "title": "Tico Tico",
  "artist": "Oscar Peterson",
  "album": "Ultimate Jazz Collections",
  "length": 180,
  "file": "/data/files/30 Tico Tico.m4a"
}];

app.Player = function () {
  var $player = document.createElement("audio");
  var $np;
  var queue_position = 0;
  $(function () {
    // Carrega a primeira música da fila
    $player.src = queue[queue_position]["file"];
    $np = $(".now-playing");
    $np.position = $(".now-playing .position");
    $np.length = $(".now-playing .length");
    $np.timeline = $(".now-playing .bar");
    $np.elapsed = $(".now-playing .elapsed");
    $player.addEventListener("timeupdate", function (event) {
      var length = duration($player.duration);
      $np.length.text(length);
      var position = duration($player.currentTime);
      $np.position.text(position);
      var percent = $player.currentTime / $player.duration * 100;
      $np.elapsed.css("width", percent + "%"); // console.log(position_is_seconds, human_position);
    });
    $ui["now-playing"] = $(".now-playing");
    $(".play-pause", $ui["now-playing"]).on("click", app.Player.playPause);
    $(".skip-prev", $ui["now-playing"]).on("click", app.Player.previousTrack);
    $(".skip-next", $ui["now-playing"]).on("click", app.Player.nextTrack); // Cliques na linha do tempo

    $np.timeline.on("click", function (event) {
      var width = $(event.delegateTarget).width();
      var position = event.offsetX;
      var percent = position / width;
      var position_in_seconds = $player.duration * percent;
      app.Player.skipToPosition(position_in_seconds);
    });
  }); // const updateTimeline
  ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Player.skipToPosition()

  var load = function load(song) {
    $player.pause();
    $player.currentTime = 0;
    $player.src = song["file"];
    var length = duration($player.duration);
    $np.length.text(length);
    $player.play();
  }; ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Player.skipToPosition()


  var skipToPosition = function skipToPosition(seconds) {
    $player.currentTime = seconds;
  }; ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Player.play()


  var play = function play() {
    $player.play();
    $np.removeClass("-state--paused").addClass("-state--playing");
  }; ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Player.pause()


  var pause = function pause() {
    $player.pause();
    $np.removeClass("-state--playing").addClass("-state--paused");
  }; ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Player.playPause()


  var playPause = function playPause() {
    if ($player.paused) {
      app.Player.play();
    } else {
      app.Player.pause();
    } // console.log("duration", $player.duration);
    // console.log("volume", $player.volume);
    // console.log("buffered", $player.buffered);
    // console.log("networkState", $player.networkState);
    // console.log("played", $player.played);
    // console.log("readyState", $player.readyState);
    // console.log("seekable", $player.seekable);

  }; ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Player.previousTrack()


  var previousTrack = function previousTrack() {
    queue_position = (queue_position - 1 + queue.length) % queue.length;
    app.Player.load(queue[queue_position]);
  }; ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Player.nextTrack()


  var nextTrack = function nextTrack() {
    queue_position = (queue_position + 1) % queue.length;
    app.Player.load(queue[queue_position]);
  }; ////////////////////////////////////////////////////////////////////////////////////////////////


  return {
    load: load,
    skipToPosition: skipToPosition,
    play: play,
    pause: pause,
    playPause: playPause,
    previousTrack: previousTrack,
    nextTrack: nextTrack
  };
}();

if ("mediaSession" in navigator) {
  navigator.mediaSession.metadata = new MediaMetadata({
    "title": "Under Cover of Darkness",
    "artist": "The Strokes",
    "album": "Angles",
    "artwork": [{
      "src": "https://lh3.ggpht.com/Cc4TZKHRq_rdChujsY__QSMO0Hcmw9kPomu9zE06vz-tjKgiVaPo4evmIyN6Gp1owl9uRK_rE-c",
      "sizes": "512x512",
      "type": "image/png"
    }]
  });
  navigator.mediaSession.setActionHandler("play", app.Player.play);
  navigator.mediaSession.setActionHandler("pause", app.Player.pause); // navigator.mediaSession.setActionHandler("seekbackward", function () { });
  // navigator.mediaSession.setActionHandler("seekforward", function () { });
  // navigator.mediaSession.setActionHandler("previoustrack", function () { });
  // navigator.mediaSession.setActionHandler("nexttrack", function () { });
} ////////////////////////////////////////////////////////////////////////////////////////////////////
// artist //////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////


app.Artist = function () {
  ////////////////////////////////////////////////////////////////////////////////////////////////
  // app.Artist.load()
  var load = function load(artist_id) {
    $.get("data/artists/" + artist_id + ".json").done(function (response) {
      var artist = response;

      var $artist = __render("artist", artist); // Álbuns


      var albums = artist["albums"];
      var $albums = $(".albums", $artist);
      albums.forEach(function (album) {
        album["cover-art"] = "background-image: url('" + album["cover"] + "')";

        var $album = __render("artist-album", album).appendTo($albums);
      }); // Hits

      var hits = artist["hits"];
      var $hits = $(".hits", $artist);
      hits.forEach(function (hit) {
        hit["formatted-length"] = duration(hit["length"]);

        var $hit = __render("artist-hit", hit).appendTo($hits);
      }); // Coloca na tela

      $ui["library"].empty().append($artist);
    });
  }; ////////////////////////////////////////////////////////////////////////////////////////////////


  return {
    load: load
  };
}(); ////////////////////////////////////////////////////////////////////////////////////////////////////
// start ///////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////


$(function () {
  app.Artist.load("the-beatles");
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJ0ZW1wbGF0ZS1lbmdpbmUuanMiLCJwbGF5ZXIuanMiLCJhcnRpc3QuanMiLCJzdGFydC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1aSIsIiR1aSIsImN1ZSIsIiQiLCJkdXJhdGlvbiIsInNlY29uZHMiLCJtb21lbnQiLCJ1dGMiLCJhc01pbGxpc2Vjb25kcyIsImZvcm1hdCIsInRlbXBsYXRlIiwiJHRlbXBsYXRlcyIsImVhY2giLCIkdGhpcyIsIm5hbWUiLCJhdHRyIiwiaHRtbCIsInJlbW92ZSIsInJlbmRlciIsImRhdGEiLCIkcmVuZGVyIiwiY2xvbmUiLCJmbiIsImZpbGxCbGFua3MiLCIkYmxhbmsiLCJmaWxsIiwicnVsZXMiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJwYWlyIiwiZGVzdCIsInRyaW0iLCJzb3VyY2UiLCJ2YWx1ZSIsImoiLCJhZGRDbGFzcyIsInZhbCIsImlmX251bGwiLCJoaWRlIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmVBdHRyIiwiaGFzQ2xhc3MiLCJfX3JlbmRlciIsInF1ZXVlIiwiUGxheWVyIiwiJHBsYXllciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIiRucCIsInF1ZXVlX3Bvc2l0aW9uIiwic3JjIiwicG9zaXRpb24iLCJ0aW1lbGluZSIsImVsYXBzZWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0ZXh0IiwiY3VycmVudFRpbWUiLCJwZXJjZW50IiwiY3NzIiwib24iLCJwbGF5UGF1c2UiLCJwcmV2aW91c1RyYWNrIiwibmV4dFRyYWNrIiwid2lkdGgiLCJkZWxlZ2F0ZVRhcmdldCIsIm9mZnNldFgiLCJwb3NpdGlvbl9pbl9zZWNvbmRzIiwic2tpcFRvUG9zaXRpb24iLCJsb2FkIiwic29uZyIsInBhdXNlIiwicGxheSIsInBhdXNlZCIsIm5hdmlnYXRvciIsIm1lZGlhU2Vzc2lvbiIsIm1ldGFkYXRhIiwiTWVkaWFNZXRhZGF0YSIsInNldEFjdGlvbkhhbmRsZXIiLCJBcnRpc3QiLCJhcnRpc3RfaWQiLCJnZXQiLCJkb25lIiwicmVzcG9uc2UiLCJhcnRpc3QiLCIkYXJ0aXN0IiwiYWxidW1zIiwiJGFsYnVtcyIsImZvckVhY2giLCJhbGJ1bSIsIiRhbGJ1bSIsImFwcGVuZFRvIiwiaGl0cyIsIiRoaXRzIiwiaGl0IiwiJGhpdCIsImVtcHR5IiwiYXBwZW5kIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUVBLElBQUFBLEdBQUEsR0FBQSxFQUFBO0FBRUEsSUFBQUMsRUFBQSxHQUFBLEVBQUE7QUFDQSxJQUFBQyxHQUFBLEdBQUEsRUFBQTtBQUVBLElBQUFDLEdBQUEsR0FBQSxFQUFBLEMsQ0FLQTs7QUFDQUMsQ0FBQSxDQUFBLFlBQUE7QUFDQUYsRUFBQUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBRSxDQUFBLENBQUEsVUFBQSxDQUFBO0FBQ0EsQ0FGQSxDQUFBOztBQUlBLElBQUFDLFFBQUEsR0FBQSxTQUFBQSxRQUFBLENBQUFDLE9BQUEsRUFBQTtBQUNBLFNBQUFDLE1BQUEsQ0FBQUMsR0FBQSxDQUFBRCxNQUFBLENBQUFGLFFBQUEsQ0FBQUMsT0FBQSxFQUFBLFNBQUEsRUFBQUcsY0FBQSxFQUFBLEVBQUFDLE1BQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxDQUZBLEMsQ0NuQkE7QUFDQTtBQUNBOzs7QUFFQVQsRUFBQSxDQUFBVSxRQUFBLEdBQUEsWUFBQTtBQUNBLE1BQUFDLFVBQUEsR0FBQSxFQUFBO0FBRUFSLEVBQUFBLENBQUEsQ0FBQSxZQUFBO0FBQ0FBLElBQUFBLENBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQVMsSUFBQSxDQUFBLFlBQUE7QUFDQSxVQUFBQyxLQUFBLEdBQUFWLENBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxVQUFBVyxJQUFBLEdBQUFELEtBQUEsQ0FBQUUsSUFBQSxDQUFBLElBQUEsQ0FBQTtBQUNBLFVBQUFDLElBQUEsR0FBQUgsS0FBQSxDQUFBRyxJQUFBLEVBQUE7QUFFQUwsTUFBQUEsVUFBQSxDQUFBRyxJQUFBLENBQUEsR0FBQVgsQ0FB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OztBQUNBLFlBQUFDLElBQUEsR0FBQXJELFFBQUEsQ0FBQSxZQUFBLEVBQUFvRCxHQUFBLENBQUEsQ0FBQUgsUUFBQSxDQUFBRSxLQUFBLENBQUE7QUFDQSxPQUhBLEVBakJBLENBc0JBOztBQUNBN0YsTUFBQUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBZ0csS0FBQSxHQUFBQyxNQUFBLENBQUFaLE9BQUE7QUFDQSxLQXhCQTtBQXlCQSxHQTFCQSxDQUpBLENBaUNBOzs7QUFFQSxTQUFBO0FBQ0FoQixJQUFBQSxJQUFBLEVBQUFBO0FBREEsR0FBQTtBQUdBLENBdENBLEVBQUEsQyxDQ0pBO0FBQ0E7QUFDQTs7O0FBRUFuRSxDQUFBLENBQUEsWUFBQTtBQUNBSixFQUFBQSxHQUFBLENBQUFpRixNQUFBLENBQUFWLElBQUEsQ0FBQSxhQUFBO0FBQ0EsQ0FGQSxDQUFBIiwiZmlsZSI6Im11c2ljLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBiYXNlIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmxldCBhcHAgPSB7IH07XHJcblxyXG5sZXQgdWkgPSB7IH07XHJcbmxldCAkdWkgPSB7IH07XHJcblxyXG5sZXQgY3VlID0geyB9O1xyXG5cclxuXHJcblxyXG5cclxuLy8gVE9ETzogbW92ZXIgcGFyYSBsdWdhciBhcHJvcHJpYWRvXHJcbiQoZnVuY3Rpb24oKSB7XHJcbiAgICAkdWlbXCJsaWJyYXJ5XCJdID0gJChcIi5saWJyYXJ5XCIpO1xyXG59KTtcclxuXHJcbmNvbnN0IGR1cmF0aW9uID0gKHNlY29uZHMpID0+IHtcclxuICAgIHJldHVybiBtb21lbnQudXRjKG1vbWVudC5kdXJhdGlvbihzZWNvbmRzLCBcInNlY29uZHNcIikuYXNNaWxsaXNlY29uZHMoKSkuZm9ybWF0KFwibTpzc1wiKTtcclxufTtcclxuIiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBjb3JlIC8gdGVtcGxhdGUgZW5naW5lIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbnVpLnRlbXBsYXRlID0gKCgpID0+IHtcclxuICAgIGxldCAkdGVtcGxhdGVzID0geyB9O1xyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCJ0ZW1wbGF0ZVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSAkdGhpcy5hdHRyKFwiaWRcIik7XHJcbiAgICAgICAgICAgIHZhciBodG1sID0gJHRoaXMuaHRtbCgpO1xyXG5cclxuICAgICAgICAgICAgJHRlbXBsYXRlc1tuYW1lXSA9ICQoaHRtbCk7XHJcbiAgICAgICAgICAgICR0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcmVuZGVyID0gKHRlbXBsYXRlLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgaWYgKCEkdGVtcGxhdGVzW3RlbXBsYXRlXSkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB2YXIgJHJlbmRlciA9ICR0ZW1wbGF0ZXNbdGVtcGxhdGVdLmNsb25lKCk7XHJcblxyXG4gICAgICAgICRyZW5kZXIuZGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgJC5mbi5maWxsQmxhbmtzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJGJsYW5rID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGZpbGwgPSAkYmxhbmsuZGF0YShcImZpbGxcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBmaWxsLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhaXIgPSBydWxlc1tpXS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVzdCA9IChwYWlyWzFdID8gcGFpclswXS50cmltKCkgOiBcImh0bWxcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gKHBhaXJbMV0gPyBwYWlyWzFdLnRyaW0oKSA6IHBhaXJbMF0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtzb3VyY2VdO1xyXG5cclxuICAgICAgICAgICAgICAgIHNvdXJjZSA9IHNvdXJjZS5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmxlbmd0aCA+IDEgJiYgdHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRhW3NvdXJjZVswXV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgc291cmNlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKHZhbHVlW3NvdXJjZVtqXV0pID8gdmFsdWVbc291cmNlW2pdXSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgdmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdCA9PT0gXCJjbGFzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRibGFuay5hZGRDbGFzcyh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXN0ID09PSBcImh0bWxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYmxhbmsuaHRtbCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXN0ID09PSBcInZhbHVlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGJsYW5rLnZhbCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGJsYW5rLmF0dHIoZGVzdCwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlmX251bGwgPSAkYmxhbmsuZGF0YShcImZpbGwtbnVsbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWZfbnVsbCA9PT0gXCJoaWRlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGJsYW5rLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlmX251bGwgPT09IFwicmVtb3ZlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGJsYW5rLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGJsYW5rXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJmaWxsXCIpXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihcImRhdGEtZmlsbFwiKVxyXG4gICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoXCJkYXRhLWZpbGwtbnVsbFwiKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoJHJlbmRlci5oYXNDbGFzcyhcImZpbGxcIikpIHtcclxuICAgICAgICAgICAgJHJlbmRlci5maWxsQmxhbmtzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiLmZpbGxcIiwgJHJlbmRlcikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuZmlsbEJsYW5rcygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gJHJlbmRlcjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlbmRlclxyXG4gICAgfTtcclxufSkoKTtcclxuXHJcbmxldCBfX3JlbmRlciA9IHVpLnRlbXBsYXRlLnJlbmRlcjtcclxuIiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBwbGF5ZXIgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmxldCBxdWV1ZSA9IFtcclxuICAgIHtcclxuICAgICAgICBcInRpdGxlXCI6IFwiQ2FwdGFpbiBDYWx2aW4gKE9yaWdpbmFsIE1peClcIixcclxuICAgICAgICBcImFydGlzdFwiOiBcIkxvdWtcIixcclxuICAgICAgICBcImFsYnVtXCI6IFwiQ2hpbGxob3AgRXNzZW50aWFscyBXaW50ZXIgMjAxOFwiLFxyXG4gICAgICAgIFwibGVuZ3RoXCI6IDE0MCxcclxuICAgICAgICBcImZpbGVcIjogXCIvZGF0YS9maWxlcy8xNCBDYXB0YWluIENhbHZpbiAoT3JpZ2luYWwgTWl4KS5tcDNcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcInRpdGxlXCI6IFwiVGljbyBUaWNvXCIsXHJcbiAgICAgICAgXCJhcnRpc3RcIjogXCJPc2NhciBQZXRlcnNvblwiLFxyXG4gICAgICAgIFwiYWxidW1cIjogXCJVbHRpbWF0ZSBKYXp6IENvbGxlY3Rpb25zXCIsXHJcbiAgICAgICAgXCJsZW5ndGhcIjogMTgwLFxyXG4gICAgICAgIFwiZmlsZVwiOiBcIi9kYXRhL2ZpbGVzLzMwIFRpY28gVGljby5tNGFcIlxyXG4gICAgfVxyXG5dO1xyXG5cclxuXHJcbmFwcC5QbGF5ZXIgPSAoKCkgPT4ge1xyXG4gICAgbGV0ICRwbGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICBsZXQgJG5wO1xyXG4gICAgbGV0IHF1ZXVlX3Bvc2l0aW9uID0gMDtcclxuXHJcbiAgICAkKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIENhcnJlZ2EgYSBwcmltZWlyYSBtw7pzaWNhIGRhIGZpbGFcclxuICAgICAgICAkcGxheWVyLnNyYyA9IHF1ZXVlW3F1ZXVlX3Bvc2l0aW9uXVtcImZpbGVcIl07XHJcblxyXG4gICAgICAgICRucCA9ICQoXCIubm93LXBsYXlpbmdcIik7XHJcbiAgICAgICAgJG5wLnBvc2l0aW9uID0gJChcIi5ub3ctcGxheWluZyAucG9zaXRpb25cIik7XHJcbiAgICAgICAgJG5wLmxlbmd0aCA9ICQoXCIubm93LXBsYXlpbmcgLmxlbmd0aFwiKTtcclxuICAgICAgICAkbnAudGltZWxpbmUgPSAkKFwiLm5vdy1wbGF5aW5nIC5iYXJcIik7XHJcbiAgICAgICAgJG5wLmVsYXBzZWQgPSAkKFwiLm5vdy1wbGF5aW5nIC5lbGFwc2VkXCIpO1xyXG5cclxuICAgICAgICAkcGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0aW1ldXBkYXRlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gZHVyYXRpb24oJHBsYXllci5kdXJhdGlvbik7XHJcbiAgICAgICAgICAgICRucC5sZW5ndGgudGV4dChsZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gZHVyYXRpb24oJHBsYXllci5jdXJyZW50VGltZSk7XHJcbiAgICAgICAgICAgICRucC5wb3NpdGlvbi50ZXh0KHBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwZXJjZW50ID0gJHBsYXllci5jdXJyZW50VGltZSAvICRwbGF5ZXIuZHVyYXRpb24gKiAxMDA7XHJcbiAgICAgICAgICAgICRucC5lbGFwc2VkLmNzcyhcIndpZHRoXCIsIHBlcmNlbnQgKyBcIiVcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwb3NpdGlvbl9pc19zZWNvbmRzLCBodW1hbl9wb3NpdGlvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR1aVtcIm5vdy1wbGF5aW5nXCJdID0gJChcIi5ub3ctcGxheWluZ1wiKTtcclxuICAgICAgICAkKFwiLnBsYXktcGF1c2VcIiwgJHVpW1wibm93LXBsYXlpbmdcIl0pLm9uKFwiY2xpY2tcIiwgYXBwLlBsYXllci5wbGF5UGF1c2UpO1xyXG4gICAgICAgICQoXCIuc2tpcC1wcmV2XCIsICR1aVtcIm5vdy1wbGF5aW5nXCJdKS5vbihcImNsaWNrXCIsIGFwcC5QbGF5ZXIucHJldmlvdXNUcmFjayk7XHJcbiAgICAgICAgJChcIi5za2lwLW5leHRcIiwgJHVpW1wibm93LXBsYXlpbmdcIl0pLm9uKFwiY2xpY2tcIiwgYXBwLlBsYXllci5uZXh0VHJhY2spO1xyXG5cclxuICAgICAgICAvLyBDbGlxdWVzIG5hIGxpbmhhIGRvIHRlbXBvXHJcbiAgICAgICAgJG5wLnRpbWVsaW5lLm9uKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLndpZHRoKCk7XHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IGV2ZW50Lm9mZnNldFg7XHJcbiAgICAgICAgICAgIGxldCBwZXJjZW50ID0gcG9zaXRpb24gLyB3aWR0aDtcclxuXHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbl9pbl9zZWNvbmRzID0gJHBsYXllci5kdXJhdGlvbiAqIHBlcmNlbnQ7XHJcbiAgICAgICAgICAgIGFwcC5QbGF5ZXIuc2tpcFRvUG9zaXRpb24ocG9zaXRpb25faW5fc2Vjb25kcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBjb25zdCB1cGRhdGVUaW1lbGluZVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gYXBwLlBsYXllci5za2lwVG9Qb3NpdGlvbigpXHJcbiAgICBjb25zdCBsb2FkID0gKHNvbmcpID0+IHtcclxuICAgICAgICAkcGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgJHBsYXllci5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgJHBsYXllci5zcmMgPSBzb25nW1wiZmlsZVwiXTtcclxuXHJcbiAgICAgICAgbGV0IGxlbmd0aCA9IGR1cmF0aW9uKCRwbGF5ZXIuZHVyYXRpb24pO1xyXG4gICAgICAgICRucC5sZW5ndGgudGV4dChsZW5ndGgpO1xyXG5cclxuICAgICAgICAkcGxheWVyLnBsYXkoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gYXBwLlBsYXllci5za2lwVG9Qb3NpdGlvbigpXHJcbiAgICBjb25zdCBza2lwVG9Qb3NpdGlvbiA9IChzZWNvbmRzKSA9PiB7XHJcbiAgICAgICAgJHBsYXllci5jdXJyZW50VGltZSA9IHNlY29uZHM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGFwcC5QbGF5ZXIucGxheSgpXHJcbiAgICBjb25zdCBwbGF5ID0gKCkgPT4ge1xyXG4gICAgICAgICRwbGF5ZXIucGxheSgpO1xyXG4gICAgICAgICRucC5yZW1vdmVDbGFzcyhcIi1zdGF0ZS0tcGF1c2VkXCIpLmFkZENsYXNzKFwiLXN0YXRlLS1wbGF5aW5nXCIpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBhcHAuUGxheWVyLnBhdXNlKClcclxuICAgIGNvbnN0IHBhdXNlID0gKCkgPT4ge1xyXG4gICAgICAgICRwbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAkbnAucmVtb3ZlQ2xhc3MoXCItc3RhdGUtLXBsYXlpbmdcIikuYWRkQ2xhc3MoXCItc3RhdGUtLXBhdXNlZFwiKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gYXBwLlBsYXllci5wbGF5UGF1c2UoKVxyXG4gICAgY29uc3QgcGxheVBhdXNlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICgkcGxheWVyLnBhdXNlZCkge1xyXG4gICAgICAgICAgICBhcHAuUGxheWVyLnBsYXkoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcHAuUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImR1cmF0aW9uXCIsICRwbGF5ZXIuZHVyYXRpb24pO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidm9sdW1lXCIsICRwbGF5ZXIudm9sdW1lKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJidWZmZXJlZFwiLCAkcGxheWVyLmJ1ZmZlcmVkKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm5ldHdvcmtTdGF0ZVwiLCAkcGxheWVyLm5ldHdvcmtTdGF0ZSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJwbGF5ZWRcIiwgJHBsYXllci5wbGF5ZWQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVhZHlTdGF0ZVwiLCAkcGxheWVyLnJlYWR5U3RhdGUpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwic2Vla2FibGVcIiwgJHBsYXllci5zZWVrYWJsZSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGFwcC5QbGF5ZXIucHJldmlvdXNUcmFjaygpXHJcbiAgICBjb25zdCBwcmV2aW91c1RyYWNrID0gKCkgPT4ge1xyXG4gICAgICAgIHF1ZXVlX3Bvc2l0aW9uID0gKHF1ZXVlX3Bvc2l0aW9uIC0gMSArIHF1ZXVlLmxlbmd0aCkgJSBxdWV1ZS5sZW5ndGg7XHJcbiAgICAgICAgYXBwLlBsYXllci5sb2FkKHF1ZXVlW3F1ZXVlX3Bvc2l0aW9uXSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGFwcC5QbGF5ZXIubmV4dFRyYWNrKClcclxuICAgIGNvbnN0IG5leHRUcmFjayA9ICgpID0+IHtcclxuICAgICAgICBxdWV1ZV9wb3NpdGlvbiA9IChxdWV1ZV9wb3NpdGlvbiArIDEpICUgcXVldWUubGVuZ3RoO1xyXG4gICAgICAgIGFwcC5QbGF5ZXIubG9hZChxdWV1ZVtxdWV1ZV9wb3NpdGlvbl0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsb2FkLFxyXG4gICAgICAgIHNraXBUb1Bvc2l0aW9uLFxyXG4gICAgICAgIHBsYXksXHJcbiAgICAgICAgcGF1c2UsXHJcbiAgICAgICAgcGxheVBhdXNlLFxyXG4gICAgICAgIHByZXZpb3VzVHJhY2ssXHJcbiAgICAgICAgbmV4dFRyYWNrXHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxuaWYgKFwibWVkaWFTZXNzaW9uXCIgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLm1ldGFkYXRhID0gbmV3IE1lZGlhTWV0YWRhdGEoe1xyXG4gICAgICAgIFwidGl0bGVcIjogXCJVbmRlciBDb3ZlciBvZiBEYXJrbmVzc1wiLFxyXG4gICAgICAgIFwiYXJ0aXN0XCI6IFwiVGhlIFN0cm9rZXNcIixcclxuICAgICAgICBcImFsYnVtXCI6IFwiQW5nbGVzXCIsXHJcbiAgICAgICAgXCJhcnR3b3JrXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJzcmNcIjogXCJodHRwczovL2xoMy5nZ3BodC5jb20vQ2M0VFpLSFJxX3JkQ2h1anNZX19RU01PMEhjbXc5a1BvbXU5ekUwNnZ6LXRqS2dpVmFQbzRldm1JeU42R3Axb3dsOXVSS19yRS1jXCIsXHJcbiAgICAgICAgICAgICAgICBcInNpemVzXCI6IFwiNTEyeDUxMlwiLFxyXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiaW1hZ2UvcG5nXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcihcInBsYXlcIiwgYXBwLlBsYXllci5wbGF5KTtcclxuICAgIG5hdmlnYXRvci5tZWRpYVNlc3Npb24uc2V0QWN0aW9uSGFuZGxlcihcInBhdXNlXCIsIGFwcC5QbGF5ZXIucGF1c2UpO1xyXG4gICAgLy8gbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKFwic2Vla2JhY2t3YXJkXCIsIGZ1bmN0aW9uICgpIHsgfSk7XHJcbiAgICAvLyBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoXCJzZWVrZm9yd2FyZFwiLCBmdW5jdGlvbiAoKSB7IH0pO1xyXG4gICAgLy8gbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKFwicHJldmlvdXN0cmFja1wiLCBmdW5jdGlvbiAoKSB7IH0pO1xyXG4gICAgLy8gbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKFwibmV4dHRyYWNrXCIsIGZ1bmN0aW9uICgpIHsgfSk7XHJcbn1cclxuIiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBhcnRpc3QgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmFwcC5BcnRpc3QgPSAoKCkgPT4ge1xyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gYXBwLkFydGlzdC5sb2FkKClcclxuICAgIGNvbnN0IGxvYWQgPSAoYXJ0aXN0X2lkKSA9PiB7XHJcbiAgICAgICAgJC5nZXQoXCJkYXRhL2FydGlzdHMvXCIgKyBhcnRpc3RfaWQgKyBcIi5qc29uXCIpLmRvbmUoKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBhcnRpc3QgPSByZXNwb25zZTtcclxuICAgICAgICAgICAgbGV0ICRhcnRpc3QgPSBfX3JlbmRlcihcImFydGlzdFwiLCBhcnRpc3QpO1xyXG5cclxuICAgICAgICAgICAgLy8gw4FsYnVuc1xyXG4gICAgICAgICAgICBsZXQgYWxidW1zID0gYXJ0aXN0W1wiYWxidW1zXCJdO1xyXG4gICAgICAgICAgICBsZXQgJGFsYnVtcyA9ICQoXCIuYWxidW1zXCIsICRhcnRpc3QpO1xyXG5cclxuICAgICAgICAgICAgYWxidW1zLmZvckVhY2goKGFsYnVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhbGJ1bVtcImNvdmVyLWFydFwiXSA9IFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIiArIGFsYnVtW1wiY292ZXJcIl0gKyBcIicpXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgJGFsYnVtID0gX19yZW5kZXIoXCJhcnRpc3QtYWxidW1cIiwgYWxidW0pLmFwcGVuZFRvKCRhbGJ1bXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEhpdHNcclxuICAgICAgICAgICAgbGV0IGhpdHMgPSBhcnRpc3RbXCJoaXRzXCJdO1xyXG4gICAgICAgICAgICBsZXQgJGhpdHMgPSAkKFwiLmhpdHNcIiwgJGFydGlzdCk7XHJcblxyXG4gICAgICAgICAgICBoaXRzLmZvckVhY2goKGhpdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaGl0W1wiZm9ybWF0dGVkLWxlbmd0aFwiXSA9IGR1cmF0aW9uKGhpdFtcImxlbmd0aFwiXSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgJGhpdCA9IF9fcmVuZGVyKFwiYXJ0aXN0LWhpdFwiLCBoaXQpLmFwcGVuZFRvKCRoaXRzKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDb2xvY2EgbmEgdGVsYVxyXG4gICAgICAgICAgICAkdWlbXCJsaWJyYXJ5XCJdLmVtcHR5KCkuYXBwZW5kKCRhcnRpc3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsb2FkXHJcbiAgICB9O1xyXG59KSgpO1xyXG4iLCIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIHN0YXJ0IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuJChmdW5jdGlvbigpIHtcclxuICAgIGFwcC5BcnRpc3QubG9hZChcInRoZS1iZWF0bGVzXCIpO1xyXG59KTtcclxuIl19
